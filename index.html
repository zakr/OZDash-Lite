<!DOCTYPE html>
<html class="no-js">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Node WebSocket</title>
    </head>
    <body>
        <!--[if lt IE 8]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

        <h1>The message is: <span id="msg"></span></h1>
        
    </body>
     <script>
     var ws = new WebSocket('ws://localhost:9002', 'echo-protocol');

     ws.addEventListener("message", function(message){

          try
          {
             var msg = JSON.parse(message.data);
          }
          catch(exception)
          {
             console.log('invalid  json');
          }
         

        document.getElementById('msg').innerHTML  =  msg;


         console.log(msg);
     })
     </script>
</html>